<!DOCTYPE html>
<html>
  <head>
    <title>You're in control</title>
    <link rel="stylesheet" href="css/seq.css">
  </head>
  <body>
    <div id="sequencer">
        <table id="matrix">
            <tr>
                <th></th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>8</th>
                <th>9</th>
                <th>10</th>
                <th>11</th>
                <th>12</th>
                <th>13</th>
                <th>14</th>
                <th>15</th>
                <th>16</th>
            </tr>
        </table>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="scripts/include.js"></script>
    <script>
        var socket = io();
        socket.on("connect", () => {
          console.log(socket.id);
        });

        document.addEventListener("visibilitychange", function() {
            if (document.visibilityState === 'visible') {

            } else {

            }
        });

        var steps = document.querySelectorAll(".step");

        socket.on('allocate track', function(msg) {
            removeTrack();
            console.log("My track is: " + (msg.track+1));
            var track = msg.track;
            var tr = createTrack(track);
            var matrix = document.getElementById("matrix");
            matrix.appendChild(tr);
        });

        socket.on('deallocate track', function(msg) {
            removeTrack();
        });

        function removeTrack() {
            console.log("Lost my track :(");
            document.querySelectorAll(".track").forEach(track => {
                track.remove();
            });
        }

    </script>


  </body>
</html>